
<!-- BEGIN USF -->
{%- liquid
    assign colors_bg = section.settings.colors_bg
    assign colors_bg_gradient = section.settings.colors_bg_gradient
    assign padding_top = section.settings.mg_top_desktop | append: 'px'
    assign padding_bottom = section.settings.mg_bottom_desktop | append: 'px'
    assign padding_top_tablet = section.settings.mg_top_tablet | append: 'px'
    assign padding_bottom_tablet = section.settings.mg_bottom_tablet | append: 'px'
    assign padding_top_mobile = section.settings.mg_top_mobile | append: 'px'
    assign padding_bottom_mobile = section.settings.mg_bottom_mobile | append: 'px'
    assign container = section.settings.container
    assign has_sidebar = false
    assign show_sidebar = section.settings.show_sidebar
    assign show_filter = section.settings.show_filter
    assign filter_type = section.settings.filter_type
    assign sidebar_type = section.settings.sidebar_type
    assign sidebar_position = section.settings.sidebar_position
    assign show_sidebar_collapse = section.settings.show_sidebar_collapse
    assign sidebar_collapse_default = section.settings.sidebar_collapse_default
    if show_sidebar
        assign filter_by_tags = section.blocks | where: "type", "filter"
        if sidebar_type == 'vertical'
            if show_filter
                if filter_type == 'storefront'
                    assign has_sidebar = true
                elsif filter_by_tags.size > 0
                    assign has_sidebar = true
                endif
            elsif section.blocks.size > 0
                assign has_sidebar = true
            endif
        else
            if show_filter
                if filter_type == 'storefront'
                    assign has_sidebar = true
                elsif filter_by_tags.size > 0
                    assign has_sidebar = true
                endif
            endif
        endif
        if show_filter
            assign filter_swatch = section.settings.filter_swatch
            assign filter_swatch_type = section.settings.filter_swatch_type
            assign filter_rectangle = section.settings.filter_rectangle
        endif 
    endif
    assign sort_by = collection.sort_by | default: collection.default_sort_by
    assign sort_options = collection.sort_options
    assign layout = section.settings.layout
    if cart.attributes.pagination != blank and cart.attributes.pagination
        assign products_per_page = cart.attributes.pagination
    else
        assign products_per_page =  section.settings.products_per_page
    endif
    assign show_toolbar = section.settings.show_toolbar
    if show_toolbar
        assign show_sorting = section.settings.show_sorting
        assign show_item_per_page = section.settings.show_item_per_page
        assign show_view_as = section.settings.show_view_as
    endif
    assign show_infinite_scrolling = section.settings.show_infinite_scrolling
    if has_sidebar
        assign sidebar_heading_font = section.settings.sidebar_heading_font
        assign sidebar_heading_font_size = section.settings.sidebar_heading_font_size
        assign sidebar_heading_font_weight = section.settings.sidebar_heading_font_weight
        assign sidebar_heading_text_transform = section.settings.sidebar_heading_text_transform
        assign enable_sticky = section.settings.enable_sticky
        assign sidebar_layout = section.settings.sidebar_layout
    endif
-%}

<div data-section-id="{{ section.id }}" data-section-type="collection" id="CollectionSection-{{ section.id }}" data-section="{{ section.id }}" class="collection-default">
    {%- if settings.layout != '4' or sidebar_type != 'horizontal' -%}
        <div class="{% if container == '1170' %}container-1170{% elsif container == '1770' %}container-1770{% elsif container == 'fullwidth'%}container-full{% else %}container{% endif %}">
    {%- endif -%}
        <div class="halo-collection-content halo-grid-content sidebar--layout_{{ sidebar_type }}">
            {%- if has_sidebar -%}
                {{ 'component-main-sidebar.css' | asset_url | stylesheet_tag }}
                <div class="page-sidebar page-sidebar-{{ sidebar_position }} page-sidebar--{{ sidebar_type }} sidebar--{{ sidebar_layout }}{% if enable_sticky %} has-sticky{% endif %}" id="halo-sidebar">
                    <a href="javascript:void(0)" class="halo-sidebar-close" data-close-sidebar role="button">
                        <span class="visually-hidden">{{ 'general.common.close' | t }}</span>
                        {% render 'icon-close' %}
                    </a>
                    <div class="halo-sidebar-header text-left">
                        <span class="title">
                            {{ 'sections.sidebar.title' | t }}
                        </span>
                    </div>
                    <div class="halo-sidebar-wrapper custom-scrollbar">
                        {% render 'collection-sidebar',
                            results: collection,
                            section: section,
                            sort_by: sort_by,
                            sidebar_type: sidebar_type,
                            show_filter: show_filter,
                            filter_type: filter_type,
                            filter_by_tags: filter_by_tags,
                            show_sorting: show_sorting,
                            show_collapse: show_sidebar_collapse,
                            sidebar_collapse: sidebar_collapse_default,
                            filter_swatch: filter_swatch,
                            filter_swatch_type: filter_swatch_type,
                            filter_rectangle: filter_rectangle
                        %}
                    </div>
                </div>
            {%- endif -%}
            <div class="page-content">
                {%- if settings.layout == '4' and sidebar_type == 'horizontal' -%}
                    <div class="{% if container == '1170' %}container-1170{% elsif container == '1770' %}container-1770{% elsif container == 'fullwidth'%}container-full{% else %}container{% endif %}">
                {%- endif -%}

                {%- for block in section.blocks -%}
                    {%- if block.type == 'feature_cards_block' -%}
                        {%- render 'collection-feature-cards-block', collection: collection -%}
                    {%- elsif block.type == 'lookbook' and block.settings.banner_pos == 'top' -%}
                        {%- liquid
                            if collection.image
                                assign image = collection.image
                                assign preview_img = collection.image
                            else
                                assign image = block.settings.image
                                assign preview_img = block.settings.image
                            endif
                            if collection.description != blank
                                assign description = collection.description
                            else
                                assign description = block.settings.description
                            endif
                            assign link = block.settings.link
                            assign margin_bottom = block.settings.margin_bottom
                            assign title = block.settings.title
                            assign fontsize_title = block.settings.fontsize_title | append: 'px'
                            assign margin_top_title = block.settings.margin_top_title | append: 'px'
                            assign title_color = block.settings.title_color
                            assign fontsize_des = block.settings.fontsize_des | append: 'px'
                            assign margin_top_des = block.settings.margin_top_des | append: 'px'
                            assign des_color = block.settings.des_color
                        -%}
                        <div class="articleLookbook-block" style="--lookbook-margin-bottom: {{ margin_bottom | append: 'px' }}";>
                            <div class="articleLookbook-item">
                                {%- if image != blank -%}
                                    <a class="image image-zoom image-adapt adaptive_height" href="{{ link }}" style="padding-top: {{ 1 | divided_by: image.aspect_ratio | times: 100 | append: '%' }}">
                                        <img {% render 'lazyload' ,preview_img: preview_img %} />
                                        {% if settings.enable_lazyload %}<span class="data-lazy-loading"></span>{% endif %}
                                    </a>
                                {%- else -%}
                                   <!--  <a class="image" href="{{ link }}">
                                        <div class="not_img" style="--height_not_img: 520px">
                                            930 x 520px
                                        </div>
                                    </a> -->
                                {%- endif -%}
                                {%- if title != blank -%}
                                    <h3 class="articleLookbook-title" style="--lb-fontsize-title: {{ fontsize_title }};
                                                                            --lb-margin-top-title: {{ margin_top_title }};
                                                                            --lb-title-color: {{ title_color }}">
                                        {{ title }}
                                    </h3>
                                {%- endif -%}
                                {%- if description != blank -%}
                                    <p class="articleLookbook-des" style="--lb-fontsize-des: {{ fontsize_des }};
                                                                        --lb-margin-top-des: {{ margin_top_des }};
                                                                        --lb-title-des: {{ des_color }}">
                                        {{ description }}
                                    </p>
                                {%- endif -%}
                            </div>
                        </div>
                    {%- endif -%}
                {%- endfor -%}

                {%- paginate collection.products by products_per_page -%}
              
                  
                        <div class="collection">
                            <div  id="main-collection-product-grid" data-id="{{ section.id }}" style="display:none"></div>

                            <style>
                            #usf_container{
                                visibility:hidden;
                            }
                            </style>
                            <div id="usf_container"></div>
                            <div class="usf-skeleton-container">
                            	<style>              
                            	  @media (max-width: 749px){
                            		.usf-mobile-hidden{
                            		  display: none !important;
                            		}
                            		.usf-skeleton-container .usf-sr-config__mobile-filters-wrapper{
                            		  display: flex;
                            		  width: 100%;
                            		  flex-wrap: wrap;
                            		}
                            		.usf-skeleton-container .usf-filters, 
                            		.usf-skeleton-container .usf-sr-config__mobile-filters-wrapper .usf-c-select{
                            		  height: 49px;
                            		  border: 1px solid #ededed;
                            		  width: 50%;
                            		  border-left: none;
                            		  display: flex !important;
                            		  align-items: center;
                            		}
                            		.usf-skeleton-container .usf-filters{
                            		  border-left: 1px solid #ededed;
                            		}
                            
                            		.usf-skeleton-container .usf-results{
                            		  height: 400px;
                            		  margin-left: -20px;
                            		  display: flex;
                            		  flex-wrap: wrap;
                            		}
                            		.usf-skeleton-container .usf-sr-config{
                            		  display: flex;
                            		  align-items: center;
                            		  justify-content: space-between;
                            		  margin-top: 13px;
                            		  flex-wrap: wrap;
                            		}
                            		
                            		.usf-skeleton-container .usf-sr-summary:before{
                            		  margin: 0 !important;
                            		  width: 100px !important;
                            		}
                            		.usf-skeleton-container .usf-views:before{
                            		  margin: 0 !important;
                            		  width: 50px !important;
                            		  margin-left: auto !important;
                            		}
                            		.usf-skeleton-container .usf-grid__item{
                            		  width: 50%;
                            		  padding-left: 20px;
                            		}
                            		.usf-skeleton-container .usf-sr-summary, 
                            		.usf-skeleton-container .usf-views{
                            		  margin: 30px 0 20px 0;
                            		  display: block;
                            		  width: 50%;
                            		}
                            		
                            		.usf-skeleton-container .usf-filters:before,
                            		.usf-skeleton-container .usf-c-select:before{
                            		  margin: 30px;
                            		}
                            	  }
                            	  
                            	  .usf-skeleton-container .usf-filters:before,
                            	  .usf-skeleton-container .usf-c-select:before,
                            	  .usf-skeleton-container .usf-sr-summary:before,
                            	  .usf-skeleton-container .usf-views:before,
                            	  .usf-skeleton-container .usf-facet .usf-title:before,
                            	  .usf-skeleton-container .usf-facet .usf-body:before,
                            	  .usf-skeleton-container .usf-facet .usf-body:after              
                            	  {
                            		content:'';
                            		display: block;
                            		background-color: #0000000b;
                            		-webkit-animation: usf-skeleton-animation 2.3s infinite;
                            		animation: usf-skeleton-animation 2.3s infinite;
                            		height: 10px;
                            		border-radius: 10px;
                            		width: 100%;                
                            	  }
                            	  
                            	  @keyframes usf-skeleton-animation {
                            		0% {
                            			opacity: 1
                            		}
                            
                            		50% {
                            			opacity: .5
                            		}
                            
                            		100% {
                            			opacity: 1
                            		}
                            	  }
                            	  
                            	  @media (min-width: 750px){
                            		.usf-skeleton-container .usf-desktop-hidden{
                            		  display: none !important;
                            		}
                            		.usf-skeleton-container .usf-facet .usf-title,
                            		.usf-skeleton-container .usf-facet .usf-body,
                            		.usf-skeleton-container .usf-c-select
                            		{
                            		  display: block !important;
                            		}              
                            	  
                            		.usf-skeleton-container .usf-sr-config__mobile-filters-wrapper{
                            		  display: none;
                            		}
                            		
                            		.usf-skeleton-container .usf-facets{
                            		  display: block;
                            		  width: 23%;
                            		  float: left;
                            		  margin-top: 17px;
                            		}
                            		
                            		.usf-skeleton-container .usf-sr-container {
                            		  width: 77%;
                            		  float: left;
                            		  padding-left: 30px;
                            		  margin-top: 17px;
                            		}
                            		
                            		.usf-skeleton-container .usf-sr-config{
                            		  display: flex;
                            		}
                            		
                            		.usf-skeleton-container .usf-sr-config > .usf-c-select{
                            		  width: 200px;
                            		}
                            		
                            		.usf-skeleton-container .usf-sr-summary{
                            		  width: 100%;
                            		}
                            		.usf-skeleton-container .usf-sr-summary:before{
                            		  margin: auto;
                            		  width: 200px;
                            		}
                            		.usf-skeleton-container .usf-views:before{
                            		}
                            		.usf-skeleton-container .usf-grid__item{
                            		  width: 50%;
                            		  padding-left: 20px;
                            		}
                            		.usf-skeleton-container .usf-views{
                            		  display: block;
                            		  width: 50px;
                            		}
                            		
                            		.usf-skeleton-container .usf-sr-container{
                            		  min-height: 700px;
                            		}
                            	  }  
                            	  
                            	  .usf-skeleton-container .usf-facet{
                            		margin-bottom: 40px;
                            	  }
                            	  
                            	  .usf-skeleton-container .usf-facet .usf-title:before{                
                            		margin-bottom: 25px;
                            		width: 70%;
                            	  }
                            	  
                            	  .usf-skeleton-container .usf-facet .usf-body:before,
                            	  .usf-skeleton-container .usf-facet .usf-body:after
                            	  {
                            		margin-bottom: 16px;
                            	  }
                            	</style>
                              
                            	<div class="usf-facets usf-mobile-hidden">
                            	  <div class="usf-facet">
                            		<div class="usf-title"></div>
                            		<div class="usf-body"></div>                
                            	  </div>
                            	  <div class="usf-facet">
                            		<div class="usf-title"></div>
                            		<div class="usf-body"></div>
                            	  </div>
                            	</div>
                            	<div class="usf-sr-container">
                            	  <div class="usf-sr-config">
                            		<div class="usf-sr-config__mobile-filters-wrapper">
                            		  <div class="usf-filters"></div>
                            		  <div class="usf-c-select"></div>
                            		</div>
                            		<div class="usf-views usf-mobile-hidden"></div>
                            		<span class="usf-sr-summary"></span>
                            		<div class="usf-views usf-desktop-hidden"></div>
                            		<div class="usf-c-select usf-mobile-hidden"></div>
                            	  </div>
                            	  <div class="usf-results usf-grid">
                            		<div class="usf-grid__item"></div>
                            		<div class="usf-grid__item"></div>
                            		<div class="usf-grid__item"></div>
                            		<div class="usf-grid__item"></div>
                            	  </div>
                            	</div>       
                            </div>
                           
                           
                        </div>
                {%- endpaginate -%}

                {%- for block in section.blocks -%}
                    {%- if block.type == 'lookbook' and block.settings.banner_pos == 'bottom' -%}
                        {%- liquid
                            if collection.image
                                assign image = collection.image
                                assign preview_img = collection.image
                            else
                                assign image = block.settings.image
                                assign preview_img = block.settings.image
                            endif
                            if collection.description != blank
                                assign description = collection.description
                            else
                                assign description = block.settings.description
                            endif
                            assign link = block.settings.link
                            assign margin_bottom = block.settings.margin_bottom
                            assign title = block.settings.title
                            assign fontsize_title = block.settings.fontsize_title | append: 'px'
                            assign margin_top_title = block.settings.margin_top_title | append: 'px'
                            assign title_color = block.settings.title_color
                            assign fontsize_des = block.settings.fontsize_des | append: 'px'
                            assign margin_top_des = block.settings.margin_top_des | append: 'px'
                            assign des_color = block.settings.des_color
                        -%}
                        <div class="articleLookbook-block" style="--lookbook-margin-bottom: {{ margin_bottom | append: 'px' }}";>
                            <div class="articleLookbook-item">
                                {%- if image != blank -%}
                                    <a class="image image-zoom image-adapt adaptive_height" href="{{ link }}" style="padding-top: {{ 1 | divided_by: image.aspect_ratio | times: 100 | append: '%' }}">
                                        <img {% render 'lazyload' ,preview_img: preview_img %} />
                                        {% if settings.enable_lazyload %}<span class="data-lazy-loading"></span>{% endif %}
                                    </a>
                                {%- else -%}
                                   <!--  <a class="image" href="{{ link }}">
                                        <div class="not_img" style="--height_not_img: 520px">
                                            930 x 520px
                                        </div>
                                    </a> -->
                                {%- endif -%}
                                {%- if title != blank -%}
                                    <h3 class="articleLookbook-title" style="--lb-fontsize-title: {{ fontsize_title }};
                                                                            --lb-margin-top-title: {{ margin_top_title }};
                                                                            --lb-title-color: {{ title_color }}">
                                        {{ title }}
                                    </h3>
                                {%- endif -%}
                                {%- if description != blank -%}
                                    <p class="articleLookbook-des" style="--lb-fontsize-des: {{ fontsize_des }};
                                                                        --lb-margin-top-des: {{ margin_top_des }};
                                                                        --lb-title-des: {{ des_color }}">
                                        {{ description }}
                                    </p>
                                {%- endif -%}
                            </div>
                        </div>
                    {%- endif -%}
                {%- endfor -%}
                
                {%- if settings.layout == '4' and sidebar_type == 'horizontal' -%}
                    </div>
                {%- endif -%}
            </div>
        </div>
    {%- if settings.layout != '4' or sidebar_type == 'horizontal' -%}
        </div>
    {%- endif -%}

    <div class="loading-overlay loading-overlay--custom">
        <div class="loading-overlay__spinner">
            <svg aria-hidden="true" focusable="false" role="presentation" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
            </svg>
        </div>
    </div>
</div>

<style type="text/css" media="screen">
    {% if has_sidebar %}
        :root {
            {% if sidebar_heading_font == 'font_1' %}
                --sidebar-heading-font: var(--font-heading-family);
            {% elsif sidebar_heading_font == 'font_2' %}
                --sidebar-heading-font: var(--font-body-family);
            {% endif %}
            {% if colors_bg != blank or colors_bg_gradient != blank %}
                --body-bg: {% if colors_bg_gradient != blank %}{{ colors_bg_gradient }}{% else %}{{ colors_bg }}{% endif %};
            {% endif %}
        }
    {% endif %}

    {% if colors_bg != blank or colors_bg_gradient != blank %}
        body{
            background: var(--body-bg);
        }
    {% endif %}

    #CollectionSection-{{ section.id }}{
        padding-top: {{ padding_top }};
        padding-bottom: {{ padding_bottom }};
    }

    {% if has_sidebar %}
        #CollectionSection-{{ section.id }} .sidebarBlock-heading{
            font-family: var(--sidebar-heading-font);
            font-size: {{ sidebar_heading_font_size | append: 'px' }};
            font-weight: {{ sidebar_heading_font_weight }};
            text-transform: {{ sidebar_heading_text_transform }};
        }
    {% endif %}

    @media (max-width: 1024px) {
        #CollectionSection-{{ section.id }}{
            padding-top: {{ padding_top_tablet }};
            padding-bottom: {{ padding_bottom_tablet }};
        }
    }

    @media (max-width: 550px) {
        #CollectionSection-{{ section.id }}{
            padding-top: {{ padding_top_mobile }};
            padding-bottom: {{ padding_bottom_mobile }};
        }
    }
</style>
<!-- END USF -->

{% comment %}USF
{%- liquid
    assign colors_bg = section.settings.colors_bg
    assign colors_bg_gradient = section.settings.colors_bg_gradient
    assign padding_top = section.settings.mg_top_desktop | append: 'px'
    assign padding_bottom = section.settings.mg_bottom_desktop | append: 'px'
    assign padding_top_tablet = section.settings.mg_top_tablet | append: 'px'
    assign padding_bottom_tablet = section.settings.mg_bottom_tablet | append: 'px'
    assign padding_top_mobile = section.settings.mg_top_mobile | append: 'px'
    assign padding_bottom_mobile = section.settings.mg_bottom_mobile | append: 'px'
    assign container = section.settings.container
    assign padding_full_width = section.settings.padding_full_width
    assign has_sidebar = false
    assign show_sidebar = section.settings.show_sidebar
    assign show_filter = section.settings.show_filter
    assign sidebar_type = section.settings.sidebar_type
    assign sidebar_position = section.settings.sidebar_position
    assign collection-product-grid = section.settings.collection-product-grid
    assign sidebar_collapse_default = section.settings.sidebar_collapse_default
    if show_sidebar
        if show_filter
            assign has_sidebar = true
            assign filter_swatch = section.settings.filter_swatch
            assign filter_swatch_type = section.settings.filter_swatch_type
            assign filter_rectangle = section.settings.filter_rectangle
        elsif section.blocks.size > 0
            assign has_sidebar = true
        endif
        if has_sidebar
            assign sidebar_heading_font = section.settings.sidebar_heading_font
            assign sidebar_heading_font_size = section.settings.sidebar_heading_font_size
            assign sidebar_heading_font_weight = section.settings.sidebar_heading_font_weight
            assign sidebar_heading_text_transform = section.settings.sidebar_heading_text_transform
            assign enable_sticky = section.settings.enable_sticky
            assign sidebar_layout = section.settings.sidebar_layout
        endif
    endif
    assign sort_by = collection.sort_by | default: collection.default_sort_by
    assign sort_options = collection.sort_options
    assign layout = section.settings.layout
    if cart.attributes.pagination != blank and cart.attributes.pagination
        assign products_per_page = cart.attributes.pagination
    else
        assign products_per_page =  section.settings.products_per_page
    endif
    assign show_toolbar = section.settings.show_toolbar
    if show_toolbar
        assign show_sorting = section.settings.show_sorting
        assign show_item_per_page = section.settings.show_item_per_page
        assign show_view_as = section.settings.show_view_as
    endif
    assign show_infinite_scrolling = section.settings.show_infinite_scrolling
    assign product_space_between_vert_desk = section.settings.product_space_between_vert_desk
    assign product_space_between_vert_mb = section.settings.product_space_between_vert_mb
    assign product_space_between_horiz_desk = section.settings.product_space_between_horiz_desk
    assign product_space_between_horiz_mb = section.settings.product_space_between_horiz_mb
-%}
<style type="text/css" media="screen">
    {%- if has_sidebar -%}
        :root {
            {%- if sidebar_heading_font == 'font_1' -%}
                --sidebar-heading-font: var(--font-heading-family);
            {%- elsif sidebar_heading_font == 'font_2' -%}
                --sidebar-heading-font: var(--font-body-family);
            {%- endif -%}
            {%- if colors_bg != blank or colors_bg_gradient != blank -%}
                --body-bg: {% if colors_bg_gradient != blank %}{{ colors_bg_gradient }}{% else %}{{ colors_bg }}{% endif %};
            {%- endif -%}
        }
    {%- endif -%}

    {%- if colors_bg != blank or colors_bg_gradient != blank -%}
        body { background: var(--body-bg)}
    {%- endif -%}

    #CollectionSection-{{ section.id }}{padding-top: {{ padding_top }};padding-bottom: {{ padding_bottom }}}

    {%- if has_sidebar -%}
        #CollectionSection-{{ section.id }} .sidebarBlock-heading, .sidebarBlock .sidebarBlock-slide__content-close{font-family: var(--sidebar-heading-font);font-size: {{ sidebar_heading_font_size | append: 'px' }};font-weight: {{ sidebar_heading_font_weight }};text-transform: {{ sidebar_heading_text_transform }}}
    {%- endif -%}

    @media (max-width: 1024px) {
        #CollectionSection-{{ section.id }}{padding-top: {{ padding_top_tablet }};padding-bottom: {{ padding_bottom_tablet }}}
        {% if container == 'fullwidth' %}
            #CollectionSection-{{ section.id }} > .container-full{
                padding-left: 15px;
                padding-right: 15px;
            }
        {% endif %}
    }
    @media (max-width: 550px) {
        #CollectionSection-{{ section.id }}{padding-top: {{ padding_top_mobile }};padding-bottom: {{ padding_bottom_mobile }}}
        {% if container == 'fullwidth' %}
            #CollectionSection-{{ section.id }} > .container-full{
                padding-left: 10px;
                padding-right: 10px;
            }
        {% endif %}
    }
    @media (min-width: 1025px) {
        {% if container == 'fullwidth' %}
            #CollectionSection-{{ section.id }} > .container-full,
            #CollectionSection-{{ section.id }} .moreItem-breadcrumb {
                padding-left: {{ padding_full_width | append: 'px' }};
                padding-right: {{ padding_full_width | append: 'px' }};
            }
        {% endif %}
    }
</style>
<div data-section-id="{{ section.id }}" data-section-type="collection" id="CollectionSection-{{ section.id }}" data-section="{{ section.id }}" class="collection-default">
    {%- if settings.layout != '4' or sidebar_type != 'horizontal' -%}
        <div class="{% if container == '1170' %}container-1170{% elsif container == '1770' %}container-1770{% elsif container == 'fullwidth'%}container-full{% else %}container{% endif %}">
    {%- endif -%}
        <div class="halo-collection-content halo-grid-content sidebar--layout_{{ sidebar_type }}">
            {%- if has_sidebar -%}
                {{ 'component-main-sidebar.css' | asset_url | stylesheet_tag }}
                <div class="page-sidebar page-sidebar-{{ sidebar_position }} page-sidebar--{{ sidebar_type }} sidebar--{{ sidebar_layout }}{% if enable_sticky %} has-sticky{% endif %}" id="halo-sidebar">
                    <button type="button" class="halo-sidebar-close" data-close-sidebar role="button"><span class="visually-hidden">{{ 'general.common.close' | t }}</span>{% render 'icon-close' %}</button>
                    <div class="halo-sidebar-header text-left{% if settings.banner_animation == 'effect_fade_up' %} scroll-trigger animate--slide-in{% endif %}"><span class="title">{{ 'sections.sidebar.title' | t }}</span></div>
                    <div class="halo-sidebar-wrapper custom-scrollbar{% if settings.banner_animation == 'effect_fade_up' %} scroll-trigger animate--slide-in{% endif %}">
                        {% render 'collection-sidebar',
                            results: collection,
                            section: section,
                            sort_by: sort_by,
                            sidebar_type: sidebar_type,
                            show_filter: show_filter,
                            show_sorting: show_sorting,
                            show_collapse: collection-product-grid,
                            sidebar_collapse: sidebar_collapse_default,
                            filter_swatch: filter_swatch,
                            filter_swatch_type: filter_swatch_type,
                            filter_rectangle: filter_rectangle
                        %}
                    </div>
                </div>
            {%- endif -%}
            <div class="page-content" id="CollectionProductGrid">
                {%- if settings.layout == '4' and sidebar_type == 'horizontal' -%}
                    <div class="{% if container == '1170' %}container-1170{% elsif container == '1770' %}container-1770{% elsif container == 'fullwidth'%}container-full{% else %}container{% endif %}">
                {%- endif -%}

                {%- for block in section.blocks -%}
                    {%- if block.type == 'lookbook' -%}
                        {%- liquid
                            if collection.image
                                assign image = collection.image
                                assign preview_img = collection.image
                            else
                                assign image = block.settings.image
                                assign preview_img = block.settings.image
                            endif
                            assign description = collection.description
                            assign show_description = block.settings.show_collection_description
                            assign link = block.settings.link
                            assign margin_bottom = block.settings.margin_bottom
                            assign title = block.settings.show_title
                            assign fontsize_title = block.settings.fontsize_title | append: 'px'
                            assign title_alignment = block.settings.page_title_alignment
                            assign title_text_transform = block.settings.page_title_text_transform
                            assign margin_top_title = block.settings.margin_top_title | append: 'px'
                            assign title_color = block.settings.title_color
                            assign fontsize_des = block.settings.fontsize_des | append: 'px'
                            assign margin_top_des = block.settings.margin_top_des | append: 'px'
                            assign des_color = block.settings.des_color
                            assign desc_alignment = block.settings.desc_alignment
                        -%}
                        <div class="articleLookbook-block{% if settings.banner_animation == 'effect_fade_up' %} scroll-trigger animate--slide-in{% endif %}" style="--lookbook-margin-bottom: {{ margin_bottom | append: 'px' }}";>
                            <div class="articleLookbook-item">
                                {%- if block.settings.show_image -%}
                                    {%- if image != blank -%}
                                        <a class="image image-zoom image-adapt adaptive_height"{% if link == blank %} role="link" aria-disabled="true"{% else %} href="{{ link }}"{% endif %} style="padding-top: {{ 1 | divided_by: image.aspect_ratio | times: 100 | append: '%' }}">
                                            {%- assign height = image.width | divided_by: image.aspect_ratio | round -%}
                                            {{ image | image_url: width: 1100 | image_tag: height: height, sizes: "100vw", widths: '375, 550, 750, 1100, 1500, 1780, 2000' }}
                                        </a>
                                    {%- endif -%}
                                {%- endif -%}
                                {%- if title -%}
                                    <h1 class="articleLookbook-title text-{{ title_alignment }}" style="--lb-fontsize-title: {{ fontsize_title }};--lb-margin-top-title: {{ margin_top_title }};--lb-title-color: {{ title_color }};--lb-title-text-transform: {{ title_text_transform }}">{{ collection.title }}</h1>
                                {%- endif -%}
                                
                                {%- if show_description and block.settings.desc_pos == 'top' -%}
                                    <div class="articleLookbook-des text-{{ desc_alignment }}" style="--lb-fontsize-des: {{ fontsize_des }};--lb-line-height-des: {{ fontsize_des | plus: 10 | append: 'px'}};--lb-margin-top-des: {{ margin_top_des }};--lb-title-des: {{ des_color }}">{{ description }}</div>
                                {%- endif -%}
                            </div>
                        </div>
                    {%- endif -%}
                {%- endfor -%}

                {%- paginate collection.products by products_per_page -%}
                    {%- if show_toolbar -%}
                        {% render 'toolbar',
                            has_sidebar: has_sidebar,
                            show_sorting: show_sorting,
                            show_item_per_page: show_item_per_page,
                            show_view_as: show_view_as,
                            products_per_page: products_per_page,
                            layout: layout,
                            sort_by: sort_by,
                            sort_options: sort_options
                        %}
                    {%- endif -%}
                    {%- if collection.products.size == 0 -%}
                        <div class="collection collection--empty{% if settings.banner_animation == 'effect_fade_up' %} scroll-trigger animate--slide-in{% endif %}" id="main-collection-product-grid" data-id="{{ section.id }}">
                            <p class="collection-product-count ">{{ 'sections.collection_template.product_count' | t: count: collection.products_count, total: collection.all_products_count }}</p>
                            <div class="collection-product-wrapper">
                                <h2 class="title">{{ 'sections.collection_template.empty' | t }} <br> {{ 'sections.collection_template.use_fewer_filters_html' | t: link: collection.url, class: "link-underline link" }}</h2>
                            </div>
                        </div>
                    {%- else -%}
                        <div class="collection{% if settings.banner_animation == 'effect_fade_up' %} scroll-trigger animate--slide-in{% endif %}">
                            <ul class="productListing {% if layout == '1' %} productList{% else %} productGrid column-{{ layout }}{% endif %} list-{{ layout }} list-unstyled" id="main-collection-product-grid" data-id="{{ section.id }}"
                                style="
                                    --space-between-vert-desk: {{product_space_between_vert_desk}}px; 
                                    --space-between-vert-mb: {{product_space_between_vert_mb}}px;
                                    --space-between-horiz-desk: {{product_space_between_horiz_desk}}px; 
                                    --space-between-horiz-mb: {{product_space_between_horiz_mb}}px;
                                "
                            >
                                {%- for product in collection.products -%}
                                    <li class="product{% if settings.banner_animation == 'effect_fade_up' %} scroll-trigger animate--slide-in{% endif %}"{% if settings.banner_animation == 'effect_fade_up' %} data-cascade style="--animation-order: {{ forloop.index }};"{% endif %}>
                                        {% render 'product-grid-layout',
                                            product_card_product: product,
                                            serial: forloop.index,
                                            sectionId: section.id,
                                            show_list: true,
                                            loading: true
                                        %}
                                    </li>
                                {%- endfor -%}
                            </ul>
                            {%- if paginate.pages > 1 -%}
                                {% render 'pagination-listing',
                                    paginate: paginate,
                                    show_infinite_scrolling: show_infinite_scrolling,pagination
                                    anchor: '',
                                    class: 'pagination-wrapper text-center' 
                                %}
                            {%- endif -%}
                        </div>
                    {%- endif -%}
                {%- endpaginate -%}

                {%- for block in section.blocks -%}
                    {%- if block.type == 'lookbook' and block.settings.desc_pos == 'bottom' -%}
                        {%- liquid
                            assign fontsize_des = block.settings.fontsize_des | append: 'px'
                            assign margin_top_des = block.settings.margin_top_des | append: 'px'
                            assign des_color = block.settings.des_color
                            assign show_description = block.settings.show_collection_description
                            assign desc_alignment = block.settings.desc_alignment
                        -%}
                      {%- if show_description -%}
                        <div class="articleLookbook-block{% if settings.banner_animation == 'effect_fade_up' %} scroll-trigger animate--slide-in{% endif %}" style="--lookbook-margin-bottom: {{ margin_bottom | append: 'px' }}";>
                            <div class="articleLookbook-item">
                                <div class="articleLookbook-des text-{{ desc_alignment }}" style="--lb-fontsize-des: {{ fontsize_des }};--lb-line-height-des: {{ fontsize_des | plus: 10 | append: 'px'}};--lb-margin-top-des: {{ margin_top_des }};--lb-title-des: {{ des_color }}">{{ description }}</div>
                            </div>
                        </div>
                      {%- endif -%}
                    {%- endif -%}
                {%- endfor -%}
                {%- if settings.layout == '4' and sidebar_type == 'horizontal' -%}
                    </div>
                {%- endif -%}
            </div>
        </div>
    {%- if settings.layout != '4' or sidebar_type == 'horizontal' -%}
        </div>
    {%- endif -%}

    <div class="loading-overlay loading-overlay--custom">
        <div class="loading-overlay__spinner" aria-label="{{ 'general.button_load_more.loading' | t }}"><svg aria-hidden="true" focusable="false" role="presentation" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle></svg></div>
    </div>
</div>
USF{% endcomment %}
